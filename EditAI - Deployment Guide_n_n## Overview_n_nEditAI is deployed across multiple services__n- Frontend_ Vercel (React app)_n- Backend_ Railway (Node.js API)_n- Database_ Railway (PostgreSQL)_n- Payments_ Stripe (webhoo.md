# EditAI - Deployment Guide\n\n## Overview\n\nEditAI is deployed across multiple services:\n- **Frontend**: Vercel (React app)\n- **Backend**: Railway (Node.js API)\n- **Database**: Railway (PostgreSQL)\n- **Payments**: Stripe (webhooks)\n\n## Prerequisites\n\n1. GitHub account with repo\n2. Vercel account (free tier)\n3. Railway account (free tier)\n4. Stripe account (free tier)\n5. OpenAI API key\n\n## Step 1: Prepare GitHub Repository\n\n```bash\n# Initialize git (if not already done)\ngit init\ngit add .\ngit commit -m \"Initial commit\"\n\n# Create GitHub repo and push\ngit remote add origin https://github.com/YOUR_USERNAME/editai.git\ngit branch -M main\ngit push -u origin main\n```\n\n## Step 2: Deploy Frontend to Vercel\n\n### Method 1: Vercel CLI\n\n```bash\n# Install Vercel CLI\nnpm i -g vercel\n\n# Login to Vercel\nvercel login\n\n# Deploy from frontend directory\ncd frontend\nvercel\n\n# Follow prompts and set environment variables\n```\n\n### Method 2: Vercel Dashboard\n\n1. Go to https://vercel.com/new\n2. Import GitHub repo\n3. Select `frontend` as root directory\n4. Add environment variables:\n   - `VITE_API_URL` = `https://editai-api.railway.app`\n   - `VITE_STRIPE_PUBLIC_KEY` = Your Stripe public key\n5. Click Deploy\n\n### Vercel Configuration (vercel.json)\n\n```json\n{\n  \"buildCommand\": \"npm run build\",\n  \"outputDirectory\": \"dist\",\n  \"env\": {\n    \"VITE_API_URL\": \"@vite_api_url\",\n    \"VITE_STRIPE_PUBLIC_KEY\": \"@vite_stripe_public_key\"\n  }\n}\n```\n\n## Step 3: Deploy Backend to Railway\n\n### Method 1: Railway Dashboard\n\n1. Go to https://railway.app\n2. Click \"New Project\"\n3. Select \"Deploy from GitHub\"\n4. Connect GitHub account\n5. Select `editai` repo\n6. Select `backend` as root directory\n\n### Add PostgreSQL\n\n1. In Railway dashboard, click \"+\" button\n2. Select \"PostgreSQL\"\n3. Railway auto-creates database\n4. Copy connection string\n\n### Set Environment Variables\n\nIn Railway dashboard, set:\n\n```\nDATABASE_URL=postgresql://user:pass@host:5432/railway\nJWT_SECRET=your_super_secret_key_here\nOPENAI_API_KEY=sk-...\nSTRIPE_SECRET_KEY=sk_test_...\nSTRIPE_WEBHOOK_SECRET=whsec_...\nSTRIPE_PRICE_PRO=price_...\nSTRIPE_PRICE_TEAM=price_...\nFRONTEND_URL=https://editai.vercel.app\nNODE_ENV=production\nPORT=5000\n```\n\n### Deploy\n\n1. Click \"Deploy\" button\n2. Railway auto-deploys from main branch\n3. Get API URL from Railway dashboard\n4. Update Vercel `VITE_API_URL` with Railway URL\n\n## Step 4: Setup Stripe Webhooks\n\n1. Go to Stripe Dashboard → Webhooks\n2. Add endpoint: `https://editai-api.railway.app/api/webhook/stripe`\n3. Select events:\n   - `customer.subscription.updated`\n   - `customer.subscription.deleted`\n4. Copy webhook signing secret\n5. Add to Railway env: `STRIPE_WEBHOOK_SECRET`\n\n## Step 5: Setup Stripe Prices\n\n1. Go to Stripe Dashboard → Products\n2. Create products:\n   - **Pro**: $19/month\n   - **Team**: $49/month\n3. Copy price IDs\n4. Add to Railway env:\n   - `STRIPE_PRICE_PRO=price_...`\n   - `STRIPE_PRICE_TEAM=price_...`\n\n## Step 6: Database Migrations\n\n### Run migrations on Railway\n\n```bash\n# Option 1: Using Railway CLI\nrailway run npm run db:push\n\n# Option 2: Using psql\npsql $DATABASE_URL < database/schema.sql\n```\n\n## Step 7: Test Deployment\n\n1. Open Vercel URL: `https://editai.vercel.app`\n2. Register new account\n3. Generate edit plan\n4. Test Stripe payment (use test card: 4242 4242 4242 4242)\n\n## Environment Variables Checklist\n\n### Frontend (Vercel)\n- [ ] `VITE_API_URL` - Backend URL\n- [ ] `VITE_STRIPE_PUBLIC_KEY` - Stripe public key\n\n### Backend (Railway)\n- [ ] `DATABASE_URL` - PostgreSQL connection\n- [ ] `JWT_SECRET` - Random secret string\n- [ ] `OPENAI_API_KEY` - OpenAI API key\n- [ ] `STRIPE_SECRET_KEY` - Stripe secret key\n- [ ] `STRIPE_WEBHOOK_SECRET` - Stripe webhook secret\n- [ ] `STRIPE_PRICE_PRO` - Stripe Pro price ID\n- [ ] `STRIPE_PRICE_TEAM` - Stripe Team price ID\n- [ ] `FRONTEND_URL` - Vercel frontend URL\n- [ ] `NODE_ENV` - Set to `production`\n- [ ] `PORT` - Set to `5000`\n\n## Monitoring & Logs\n\n### Vercel Logs\n```bash\nvercel logs\n```\n\n### Railway Logs\n```bash\nrailway logs\n```\n\n### Database Monitoring\n\nRailway provides built-in monitoring:\n1. Go to Railway Dashboard\n2. Select PostgreSQL\n3. View metrics and logs\n\n## Troubleshooting\n\n### Frontend not connecting to backend\n\n1. Check `VITE_API_URL` in Vercel\n2. Verify Railway backend is running\n3. Check CORS settings in backend\n\n### Database connection error\n\n1. Verify `DATABASE_URL` is correct\n2. Check PostgreSQL is running in Railway\n3. Run migrations: `railway run npm run db:push`\n\n### Stripe webhook not working\n\n1. Verify webhook URL in Stripe dashboard\n2. Check `STRIPE_WEBHOOK_SECRET` is correct\n3. View webhook logs in Stripe dashboard\n\n### OpenAI API errors\n\n1. Verify API key is correct\n2. Check API key has sufficient credits\n3. Verify API key permissions\n\n## Scaling\n\n### Vercel\n- Automatic scaling\n- CDN for static assets\n- Serverless functions\n\n### Railway\n- Manual scaling (upgrade plan)\n- Database backups\n- Monitoring and alerts\n\n## Security Checklist\n\n- [ ] Change `JWT_SECRET` to random string\n- [ ] Enable HTTPS (automatic on Vercel/Railway)\n- [ ] Set `NODE_ENV=production`\n- [ ] Restrict database access\n- [ ] Enable Stripe webhook verification\n- [ ] Use environment variables for secrets\n- [ ] Enable CORS only for frontend domain\n- [ ] Setup rate limiting\n- [ ] Enable database backups\n\n## Cost Estimation\n\n**Monthly costs:**\n- Vercel: $0-20 (free tier included)\n- Railway: $5-50 (depends on usage)\n- Stripe: 2.9% + $0.30 per transaction\n- OpenAI: $0.01-10 (depends on API usage)\n\n**Total: $5-80/month** (depending on scale)\n\n## Next Steps\n\n1. ✅ Deploy frontend to Vercel\n2. ✅ Deploy backend to Railway\n3. ✅ Setup PostgreSQL database\n4. ✅ Configure Stripe webhooks\n5. ✅ Run database migrations\n6. ✅ Test end-to-end flow\n7. ✅ Setup monitoring and alerts\n8. ✅ Launch on ProductHunt\n\n## Support\n\n- Vercel Docs: https://vercel.com/docs\n- Railway Docs: https://docs.railway.app\n- Stripe Docs: https://stripe.com/docs\n- OpenAI Docs: https://platform.openai.com/docs\n
