version: '3.8'\n\nservices:\n  # PostgreSQL Database\n  postgres:\n    image: postgres:15-alpine\n    container_name: editai-db\n    environment:\n      POSTGRES_DB: editai\n      POSTGRES_USER: editai\n      POSTGRES_PASSWORD: editai_dev_password\n    ports:\n      - \"5432:5432\"\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n      - ./database/schema.sql:/docker-entrypoint-initdb.d/schema.sql\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U editai\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  # Backend API\n  backend:\n    build:\n      context: ./backend\n      dockerfile: Dockerfile\n    container_name: editai-api\n    environment:\n      DATABASE_URL: postgresql://editai:editai_dev_password@postgres:5432/editai\n      JWT_SECRET: your_jwt_secret_here\n      OPENAI_API_KEY: ${OPENAI_API_KEY}\n      STRIPE_SECRET_KEY: ${STRIPE_SECRET_KEY}\n      NODE_ENV: development\n      PORT: 5000\n    ports:\n      - \"5000:5000\"\n    depends_on:\n      postgres:\n        condition: service_healthy\n    volumes:\n      - ./backend/src:/app/src\n    command: npm run dev\n\n  # Frontend (Optional - for development)\n  frontend:\n    build:\n      context: ./frontend\n      dockerfile: Dockerfile.dev\n    container_name: editai-web\n    environment:\n      VITE_API_URL: http://localhost:5000\n      VITE_STRIPE_PUBLIC_KEY: ${VITE_STRIPE_PUBLIC_KEY}\n    ports:\n      - \"3000:5173\"\n    depends_on:\n      - backend\n    volumes:\n      - ./frontend/src:/app/src\n    command: npm run dev\n\nvolumes:\n  postgres_data:\n\nnetworks:\n  default:\n    name: editai-network\n
